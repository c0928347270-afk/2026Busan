<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üíú 2026 ÈáúÂ±±Â§¢Âπª‰πãÊóÖ üíú</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Mali:wght@600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            light: '#E0E3FF', 
                            DEFAULT: '#8E97FD', 
                            dark: '#6D75C9', 
                        },
                        text: '#4A4A68', 
                        background: '#F9FAFF', 
                        card: '#FFFFFF', 
                        accent: {
                            food: '#FFB7B2',     
                            shopping: '#A0E7E5', 
                            sightseeing: '#FBE7C6', 
                            travel: '#B9CCF2',   
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                        cute: ['"Mali"', 'cursive'], 
                    },
                    boxShadow: {
                        'custom-sm': '0 2px 8px 0 rgba(142, 151, 253, 0.15)',
                        'custom-md': '0 4px 12px -2px rgba(142, 151, 253, 0.2)',
                        'custom-lg': '0 10px 25px -5px rgba(142, 151, 253, 0.25)',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #F9FAFF;
            color: #4A4A68;
            font-family: 'Noto Sans TC', sans-serif;
            -webkit-tap-highlight-color: transparent;
            padding-bottom: 90px; /* Ensure content isn't hidden behind new taller nav */
        }

        /* Card Style */
        .app-card {
            background-color: #FFFFFF; 
            border-radius: 24px; /* More rounded */
            box-shadow: 0 8px 20px rgba(142, 151, 253, 0.12);
            border: 2px solid #F0F2FF;
            transition: all 0.3s ease;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .btn-press:active {
            transform: scale(0.95);
            opacity: 0.8;
        }
        
        .pie-chart {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: conic-gradient(v-bind(pieChartBackground));
            box-shadow: 0 0 0 6px #fff, 0 0 0 8px #E0E3FF;
        }

        .chic-title {
            font-family: 'Mali', cursive;
            letter-spacing: 1px;
        }

        /* Bottom Nav Optimization */
        .bottom-nav {
            height: 80px; /* Taller for better touch */
            padding-bottom: env(safe-area-inset-bottom);
        }

        @media (min-width: 1024px) {
            #app-container {
                display: grid;
                grid-template-columns: 320px 1fr;
                min-height: 100vh;
            }
            .sidebar {
                border-right: 2px solid #F0F2FF;
            }
            body { padding-bottom: 0; }
        }
    </style>
</head>
<body>

<div id="app" class="min-h-screen">
    <div id="app-container" class="lg:grid">

        <aside class="sidebar fixed top-0 left-0 h-full w-80 p-8 lg:block hidden bg-white z-50">
            <header class="mb-12">
                <h1 class="text-4xl font-black text-primary flex items-center gap-3 chic-title">
                    <i class="ph ph-airplane-tilt text-4xl" weight="fill"></i>
                    BUSAN 2026
                </h1>
                <p class="text-base text-text/70 font-bold mt-2">È¶¨Âç°ÈæçËóçÁ¥´Â§¢Âπª‰πãÊóÖ</p>
            </header>
            
            <nav class="space-y-4">
                <button v-for="tab in tabs" :key="tab.id"
                    @click="currentTab = tab.id"
                    :class="currentTab === tab.id ? 'bg-primary text-white shadow-custom-md' : 'text-text/70 hover:bg-primary/10'"
                    class="w-full text-left p-5 rounded-2xl flex items-center gap-4 transition-colors text-lg font-bold btn-press">
                    <i :class="tab.icon" class="text-2xl" :weight="currentTab === tab.id ? 'fill' : 'bold'"></i>
                    {{ tab.name }}
                </button>
            </nav>

            <div class="absolute bottom-10 left-8 right-8 pt-6 border-t border-gray-100">
                 <div class="text-sm text-text/50 font-bold flex items-center gap-2">
                    <i class="ph ph-calendar-heart text-xl"></i>
                    2026.01.21 - 01.25
                 </div>
            </div>
        </aside>

        <main class="main-content lg:col-start-2 lg:pb-10 p-5">

            <header class="lg:hidden pb-6 pt-4 flex justify-between items-center sticky top-0 bg-[#F9FAFF]/95 backdrop-blur-sm z-20">
                 <h1 class="text-3xl font-black text-primary flex items-center gap-2 chic-title">
                    <i :class="currentTabIcon" class="text-3xl" weight="fill"></i>
                    {{ currentTabName }}
                </h1>
                <p class="text-xs font-black text-white bg-primary px-3 py-1.5 rounded-full shadow-sm">2026</p>
            </header>
            
            <div v-if="currentTab === 'itinerary'" class="space-y-6">
                <div class="app-card p-4 overflow-x-auto no-scrollbar">
                    <div class="flex space-x-3">
                        <button v-for="i in 5" :key="i" 
                            @click="activeDay = i"
                            :class="activeDay === i ? 'bg-primary text-white shadow-custom-md scale-105' : 'bg-white text-text/60 border border-primary/20'"
                            class="flex-shrink-0 w-16 h-20 rounded-2xl flex flex-col items-center justify-center transition-all duration-300 btn-press font-bold">
                            <span class="text-[10px] uppercase opacity-90 mb-1">{{ getDayInfo(i).day }}</span> 
                            <span class="text-2xl font-black leading-none font-cute">{{ getDayInfo(i).date.slice(3) }}</span>
                        </button>
                    </div>
                </div>

                <div class="flex justify-between items-center px-2 mb-2">
                    <h2 class="text-2xl font-black text-text/80">{{ getDayInfo(activeDay).fullDay }}</h2>
                </div>

                <div class="space-y-5">
                    <div v-for="item in filteredItinerary" :key="item.id" 
                        class="app-card p-5 flex gap-5 relative border-l-[8px]"
                        :class="item.isFlight ? 'border-primary' : `border-accent-${item.category}`">
                        
                        <div class="flex flex-col items-center min-w-[60px] flex-shrink-0 pt-1">
                            <span class="text-xl font-black text-primary font-cute leading-none">{{ item.time }}</span>
                            <div class="h-full w-1 bg-primary/20 my-2 rounded-full"></div>
                        </div>

                        <div class="flex-1 pb-1 min-w-0">
                            <div class="flex flex-wrap justify-between items-start mb-2 gap-2">
                                <h3 class="font-black text-lg text-text/90 leading-snug">{{ item.title }}</h3>
                            </div>
                            
                            <div class="flex items-center text-sm text-text/60 font-bold mb-3">
                                <i class="ph ph-map-pin-fill mr-1 text-primary"></i>
                                <span class="truncate">{{ item.location }}</span>
                            </div>

                            <p v-if="item.desc" class="text-base text-text/80 bg-primary/5 p-4 rounded-2xl w-full whitespace-pre-wrap leading-relaxed border border-primary/10 shadow-inner">
                               {{ item.desc }}
                            </p>

                            <div class="mt-4 flex gap-3">
                                <a :href="getNaverMapLink(item.location)" target="_blank" 
                                   class="flex-1 inline-flex justify-center items-center text-sm font-bold text-white bg-[#03C75A] py-3 rounded-xl shadow-custom-sm btn-press">
                                    <i class="ph ph-navigation-arrow-fill mr-2"></i> Naver
                                </a>
                                <a :href="getGoogleMapLink(item.location)" target="_blank" 
                                   class="flex-1 inline-flex justify-center items-center text-sm font-bold text-blue-500 bg-blue-50 border border-blue-100 py-3 rounded-xl shadow-custom-sm btn-press">
                                    <i class="ph ph-map-pin-fill mr-2"></i> Google
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="currentTab === 'money'" class="space-y-6">
                
                <div class="app-card p-6 bg-gradient-to-br from-primary/10 to-white border-primary/20">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="font-black text-lg text-text/80 flex items-center gap-2"><i class="ph ph-calculator-fill text-primary text-2xl"></i> ÂåØÁéáÊèõÁÆó</h4>
                        <div class="flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-sm border border-primary/20">
                            <span class="text-xs font-bold text-text/50">ÂåØÁéá</span>
                            <input v-model.number="exchangeRate" type="number" class="w-14 text-right font-black text-base outline-none text-primary bg-transparent" min="0.01" step="0.01">
                        </div>
                    </div>
                    <div class="flex items-center border-b-2 border-primary/10 pb-3 mb-3">
                        <span class="font-bold text-base text-text/40 w-16">KRW</span>
                        <input v-model.number="calcKRW" type="number" placeholder="0" class="w-full text-right text-4xl font-black outline-none bg-transparent text-text/80 font-cute">
                    </div>
                    <div class="flex items-center">
                        <span class="font-bold text-base text-text/40 w-16">TWD</span>
                        <div class="w-full text-right text-4xl font-black text-primary font-cute">{{ formatNumber(calculatedTWD) }}</div>
                    </div>
                </div>

                <div class="app-card p-6 bg-white border-l-8 border-accent-shopping">
                    <h4 class="font-black text-lg text-text/80 mb-5 flex items-center gap-2">
                        <i class="ph ph-wallet-fill text-accent-shopping text-2xl"></i> Á∏ΩÊ∂àË≤ªÊ¶ÇË¶Ω
                    </h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-2xl border border-gray-100">
                            <p class="text-xs text-text/50 font-bold mb-1">ÈüìÂÖÉ (KRW)</p>
                            <p class="text-xl font-black text-text/80 font-cute">‚Ç© {{ formatNumber(totalExpenseKRW) }}</p>
                        </div>
                        <div class="bg-primary/5 p-4 rounded-2xl border border-primary/10">
                            <p class="text-xs text-text/50 font-bold mb-1">Âè∞Âπ£ (TWD)</p>
                            <p class="text-xl font-black text-primary font-cute">NT$ {{ formatNumber(totalExpenseTWD) }}</p>
                        </div>
                    </div>
                </div>

                <div class="app-card p-6 border-l-8 border-accent-food">
                    <h4 class="font-black text-lg text-text/80 mb-5 flex items-center gap-2">
                        <i class="ph ph-receipt-fill text-accent-food text-2xl"></i> Êñ∞Â¢ûË®òÂ∏≥
                    </h4>
                    <div class="space-y-4">
                        <div class="flex gap-3">
                            <input type="date" v-model="newExpense.date" class="bg-gray-50 p-4 rounded-2xl text-sm font-bold outline-none w-1/3 shadow-sm">
                            <select v-model="newExpense.category" class="bg-gray-50 p-4 rounded-2xl text-sm font-bold outline-none flex-1 shadow-sm">
                                <option value="" disabled>ÈÅ∏ÊìáÈ°ûÂà•</option>
                                <option v-for="cat in filterCategories.filter(c => c.key !== 'all' && c.key !== 'flight')" :key="cat.key" :value="cat.key">{{ cat.name }}</option>
                            </select>
                        </div>
                        <input v-model="newExpense.item" placeholder="Ê∂àË≤ªÈ†ÖÁõÆ (Â¶Ç: ÊôöÈ§ê)" class="w-full bg-gray-50 p-4 rounded-2xl text-base font-bold outline-none focus:ring-2 ring-primary/30 shadow-sm">
                        <div class="relative">
                            <input v-model.number="newExpense.amount" type="number" placeholder="ÈáëÈ°ç" class="w-full bg-gray-50 p-4 pl-10 rounded-2xl text-lg font-bold outline-none focus:ring-2 ring-primary/30 font-cute shadow-sm">
                            <span class="absolute left-4 top-4.5 text-sm font-bold text-text/40">‚Ç©</span>
                        </div>
                        <button @click="addExpense" :disabled="!newExpense.item || !newExpense.amount || !newExpense.category" class="w-full bg-primary text-white py-4 rounded-2xl font-black shadow-custom-md btn-press disabled:opacity-50 flex items-center justify-center gap-2 text-lg">
                            <i class="ph ph-plus-circle-fill"></i> Âä†ÂÖ•Ê∏ÖÂñÆ
                        </button>
                    </div>
                </div>
                
                <div v-if="expenses.length > 0" class="space-y-4">
                    <div class="app-card p-6 flex items-center justify-center gap-6">
                        <div class="pie-chart flex-shrink-0"></div>
                        <div class="text-xs space-y-2 w-full">
                            <div v-for="(item, key) in expenseBreakdownTWD" :key="key" class="flex justify-between items-center" v-show="item.percentage > 0">
                                <span class="flex items-center gap-2 font-bold text-text/70">
                                    <span class="w-3 h-3 rounded-full" :style="{background: item.color}"></span> {{ item.name }}
                                </span>
                                <span class="font-black text-primary text-sm">{{ item.percentage }}%</span>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-3 pb-10">
                        <div v-for="(exp, index) in expenses" :key="index" class="bg-white p-4 rounded-2xl border border-gray-100 flex justify-between items-center shadow-sm">
                            <div class="flex-1 pr-2">
                                <p class="font-bold text-text/90 text-base mb-1">{{ exp.item }}</p>
                                <p class="text-xs text-text/50 font-bold flex items-center gap-1">
                                    <i class="ph ph-calendar-blank"></i> {{ exp.date.slice(5) }} 
                                    <span class="mx-1">¬∑</span> 
                                    {{ getCategoryName(exp.category) }}
                                </p>
                            </div>
                            <div class="flex items-center gap-4">
                                <div class="text-right">
                                    <p class="text-xs font-bold text-text/40 font-cute">‚Ç©{{ formatNumber(exp.amount) }}</p>
                                    <p class="text-base font-black text-primary font-cute">NT${{ formatNumber(convertKRWToTWD(exp.amount)) }}</p>
                                </div>
                                <button @click="removeExpense(index)" class="text-text/20 hover:text-red-400 p-1 btn-press"><i class="ph ph-trash-fill text-xl"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="currentTab === 'info'" class="space-y-8">
                 <div class="app-card p-6 border-l-8 border-primary bg-primary/5">
                    <div class="flex justify-between items-center mb-5 pb-3 border-b border-dashed border-primary/20">
                        <h3 class="font-black text-xl text-text/80">üõ´ ÂéªÁ®ãËà™Áè≠</h3>
                        <span class="font-black text-3xl text-primary font-cute">BR164</span>
                    </div>
                    <div class="grid grid-cols-2 gap-6 text-sm">
                        <div>
                            <p class="text-xs text-text/40 font-bold mb-1">DATE</p>
                            <p class="font-black text-text text-base">2026/01/21</p>
                        </div>
                        <div>
                            <p class="text-xs text-text/40 font-bold mb-1">TIME</p>
                            <p class="font-black text-text text-base">14:25 - 17:40</p>
                        </div>
                        <div>
                            <p class="text-xs text-text/40 font-bold mb-1">DEPARTURE</p>
                            <p class="font-black text-text text-base">TPE (T2)</p>
                        </div>
                        <div>
                            <p class="text-xs text-text/40 font-bold mb-1">ARRIVAL</p>
                            <p class="font-black text-text text-base">PUS (Gimhae)</p>
                        </div>
                        <div class="col-span-2 bg-white/50 p-2 rounded-lg border border-primary/10">
                            <p class="text-xs text-text/50 font-bold">BOARDING / GATE</p>
                            <p class="font-black text-primary text-lg">13:55 / TBD</p>
                        </div>
                    </div>
                </div>

                <div class="app-card p-6 border-l-8 border-accent-food bg-accent-food/5">
                    <div class="flex justify-between items-center mb-5 pb-3 border-b border-dashed border-accent-food/20">
                        <h3 class="font-black text-xl text-text/80">üõ¨ ÂõûÁ®ãËà™Áè≠</h3>
                        <span class="font-black text-3xl text-accent-food font-cute">BR163</span>
                    </div>
                    <div class="grid grid-cols-2 gap-6 text-sm">
                        <div>
                            <p class="text-xs text-text/40 font-bold mb-1">DATE</p>
                            <p class="font-black text-text text-base">2026/01/25</p>
                        </div>
                        <div>
                            <p class="text-xs text-text/40 font-bold mb-1">TIME</p>
                            <p class="font-black text-text text-base">18:55 - 20:25</p>
                        </div>
                         <div>
                            <p class="text-xs text-text/40 font-bold mb-1">DEPARTURE</p>
                            <p class="font-black text-text text-base">PUS (Intl)</p>
                        </div>
                        <div>
                            <p class="text-xs text-text/40 font-bold mb-1">ARRIVAL</p>
                            <p class="font-black text-text text-base">TPE (T2)</p>
                        </div>
                        <div class="col-span-2 bg-white/50 p-2 rounded-lg border border-accent-food/10">
                            <p class="text-xs text-text/50 font-bold">BOARDING / GATE</p>
                            <p class="font-black text-accent-food text-lg">18:25 / TBD</p>
                        </div>
                    </div>
                </div>

                <div class="app-card p-6 border-4 border-primary/10">
                    <h3 class="font-black text-2xl text-text/80 mb-4 flex items-center gap-3">
                        <i class="ph ph-house-line-fill text-primary"></i> ‰ΩèÂÆøË≥áË®ä
                    </h3>
                    <p class="font-black text-xl text-text mb-2">NewCZÂçóÊµ¶Â∫ó</p>
                    <p class="text-sm text-text/60 font-bold mb-6 bg-gray-50 p-3 rounded-xl select-all border border-gray-100">
                        <i class="ph ph-map-pin mr-1"></i> ÈáúÂ±±Âª£ÂüüÂ∏Ç‰∏≠ÂçÄÂÖâÂæ©Ë∑Ø8ËôüË°ó 32
                    </p>
                    <div class="flex gap-3">
                         <a :href="getNaverMapLink('NewCZÂçóÊµ¶Â∫ó')" target="_blank" class="flex-1 py-3 bg-[#03C75A] text-white font-black text-center rounded-xl shadow-custom-md btn-press text-base flex items-center justify-center gap-2">
                            <i class="ph ph-navigation-arrow-fill"></i> Naver
                        </a>
                        <a :href="getGoogleMapLink('NewCZÂçóÊµ¶Â∫ó')" target="_blank" class="flex-1 py-3 bg-blue-500 text-white font-black text-center rounded-xl shadow-custom-md btn-press text-base flex items-center justify-center gap-2">
                            <i class="ph ph-map-pin-fill"></i> Google
                        </a>
                    </div>
                </div>
            </div>

            <div v-if="currentTab === 'guide'" class="space-y-8">
                <div class="app-card p-6">
                    <h3 class="font-black text-2xl text-text/80 mb-5 flex items-center gap-3 border-b border-gray-100 pb-3">
                        <i class="ph ph-suitcase-fill text-primary text-3xl"></i> Ë°åÊùéÊ∏ÖÂñÆ
                    </h3>
                    <div class="flex gap-3 mb-5">
                        <input v-model="newLuggageItem" class="bg-gray-50 flex-1 p-3 rounded-xl text-sm font-bold outline-none border focus:border-primary" placeholder="Êñ∞Â¢ûÁâ©ÂìÅ...">
                        <button @click="addLuggage" class="bg-primary text-white px-5 rounded-xl font-bold text-sm btn-press shadow-custom-sm">Êñ∞Â¢û</button>
                    </div>
                    <div class="space-y-3">
                        <div v-for="(item, index) in luggageList" :key="index" class="flex items-center bg-gray-50 p-4 rounded-2xl transition-all" :class="{'opacity-50': item.checked}">
                            <input type="checkbox" v-model="item.checked" class="w-6 h-6 accent-primary rounded-md cursor-pointer">
                            <span class="ml-4 font-bold text-base flex-1" :class="{'line-through': item.checked}">{{ item.text }}</span>
                            <button @click="removeLuggage(index)" class="text-text/30 hover:text-red-400"><i class="ph ph-x-circle-fill text-xl"></i></button>
                        </div>
                    </div>
                </div>
                
                 <div class="app-card p-6 border-t-8 border-accent-shopping">
                    <h3 class="font-black text-2xl text-text/80 mb-5 flex items-center gap-3 border-b border-gray-100 pb-3">
                        <i class="ph ph-shopping-bag-fill text-accent-shopping text-3xl"></i> ÂøÖË≤∑Ê∏ÖÂñÆ
                    </h3>
                    <div class="flex gap-3 mb-5">
                        <input v-model="newMustBuyItem" class="bg-gray-50 flex-1 p-3 rounded-xl text-sm font-bold outline-none border focus:border-accent-shopping" placeholder="Êñ∞Â¢ûÊà∞Âà©ÂìÅ...">
                        <button @click="addMustBuy" class="bg-accent-shopping text-white px-5 rounded-xl font-bold text-sm btn-press shadow-custom-sm">Êñ∞Â¢û</button>
                    </div>
                    <div class="space-y-3">
                        <div v-for="(item, index) in mustBuyList" :key="index" class="flex items-center bg-gray-50 p-4 rounded-2xl transition-all" :class="{'opacity-50': item.checked}">
                            <input type="checkbox" v-model="item.checked" class="w-6 h-6 accent-accent-shopping rounded-md cursor-pointer">
                            <span class="ml-4 font-bold text-base flex-1" :class="{'line-through': item.checked}">{{ item.text }}</span>
                            <button @click="removeMustBuy(index)" class="text-text/30 hover:text-red-400"><i class="ph ph-x-circle-fill text-xl"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div v-if="currentTab === 'map'" class="h-[75vh] flex flex-col space-y-6">
                <div class="app-card p-5">
                     <div class="flex gap-3">
                        <input v-model="mapQuery" class="bg-gray-50 flex-1 p-4 rounded-2xl text-base font-bold outline-none border focus:border-primary" placeholder="Ëº∏ÂÖ•Âú∞ÈªûÊêúÂ∞ã...">
                        <button @click="searchNaverMap" class="bg-[#03C75A] text-white px-5 rounded-2xl font-black shadow-md btn-press text-sm">Naver</button>
                        <button @click="searchGoogleMap" class="bg-blue-500 text-white px-5 rounded-2xl font-black shadow-md btn-press text-sm">Google</button>
                     </div>
                </div>
                <div class="flex-1 rounded-3xl overflow-hidden shadow-custom-lg border-4 border-white">
                    <iframe width="100%" height="100%" style="border:0" loading="lazy" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d102716.27850871927!2d129.0838128!3d35.1584949!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3568e89f81216d8f%3A0x6a0c5c36af1c944d!2sBusan%2C%20South%20Korea!5e0!3m2!1sen!2stw!4v1703649600000!5m2!1sen!2stw"></iframe>
                </div>
            </div>

        </main>
    </div>

    <nav class="fixed bottom-0 w-full pb-safe pt-2 px-2 flex justify-around items-end bg-white/95 backdrop-blur-xl rounded-t-[30px] shadow-[0_-10px_40px_rgba(142,151,253,0.15)] z-50 lg:hidden border-t border-white bottom-nav">
        <button v-for="tab in tabs" :key="tab.id" @click="currentTab = tab.id"
            :class="currentTab === tab.id ? 'text-primary -translate-y-2' : 'text-text/30'" 
            class="flex flex-col items-center p-2 flex-1 transition-all duration-300 btn-press group">
            <div :class="currentTab === tab.id ? 'bg-primary/10 p-3 rounded-2xl mb-1' : 'mb-1'">
                <i :class="tab.icon" class="text-3xl transition-transform" :weight="currentTab === tab.id ? 'fill' : 'bold'"></i>
            </div>
            <span class="text-[11px] font-black tracking-wide group-hover:text-primary transition-colors">{{ tab.name }}</span>
        </button>
    </nav>

</div>

<script>
    const { createApp, ref, computed, onMounted, watch } = Vue;

    createApp({
        setup() {
            const currentTab = ref('itinerary');
            const activeDay = ref(1);
            const mapQuery = ref('');
            
            const luggageList = ref([]);
            const newLuggageItem = ref('');
            const mustBuyList = ref([]);
            const newMustBuyItem = ref('');
            
            const calcKRW = ref('');
            const exchangeRate = ref(41.5); 
            const expenses = ref([]);
            const newExpense = ref({ date: '', item: '', amount: null, category: '' });

            const tabs = [
                { id: 'itinerary', name: 'Ë°åÁ®ã', icon: 'ph-notebook' },
                { id: 'money', name: 'Ë®òÂ∏≥', icon: 'ph-currency-krw' },
                { id: 'info', name: 'Ê©üÁ•®', icon: 'ph-ticket' },
                { id: 'guide', name: 'Ê∏ÖÂñÆ', icon: 'ph-list-checks' },
                { id: 'map', name: 'Âú∞Âúñ', icon: 'ph-map-trifold' },
            ];
            const desktopTabs = tabs;

            const currentTabName = computed(() => tabs.find(t => t.id === currentTab.value)?.name);
            const currentTabIcon = computed(() => tabs.find(t => t.id === currentTab.value)?.icon);
            
            const tripDates = {
                1: { date: '01/21', day: 'ÈÄ±‰∏â', fullDay: '1Êúà21Êó• (ÈÄ±‰∏â)' },
                2: { date: '01/22', day: 'ÈÄ±Âõõ', fullDay: '1Êúà22Êó• (ÈÄ±Âõõ)' },
                3: { date: '01/23', day: 'ÈÄ±‰∫î', fullDay: '1Êúà23Êó• (ÈÄ±‰∫î)' },
                4: { date: '01/24', day: 'ÈÄ±ÂÖ≠', fullDay: '1Êúà24Êó• (ÈÄ±ÂÖ≠)' },
                5: { date: '01/25', day: 'ÈÄ±Êó•', fullDay: '1Êúà25Êó• (ÈÄ±Êó•)' },
            };

            const filterCategories = [
                { key: 'all', name: 'ÂÖ®ÈÉ®' },
                { key: 'food', name: 'ÁæéÈ£ü', colorCode: '#FFB7B2' },
                { key: 'shopping', name: 'Ë≥ºÁâ©', colorCode: '#A0E7E5' },
                { key: 'sightseeing', name: 'ÊôØÈªû', colorCode: '#FBE7C6' },
                { key: 'travel', name: '‰∫§ÈÄö', colorCode: '#B9CCF2' },
                { key: 'flight', name: 'Ëà™Áè≠', colorCode: '#E0E3FF' }
            ];

            const defaultLuggage = [
                { text: 'Ë≠∑ÁÖß / Á∞ΩË≠â', checked: false },
                { text: 'ÈüìÂπ£ÁèæÈáë / ‰ø°Áî®Âç° / WOWPASS', checked: false },
                { text: 'ËΩâÊé•È†≠ (ÈüìÂúãÂúìÂ≠î)', checked: false },
                { text: 'Ë°åÂãïÈõªÊ∫ê / ÂÖÖÈõªÁ∑ö', checked: false },
                { text: 'ÁâôÂà∑ÁâôËÜè (Áí∞‰øù‰∏çÊèê‰æõ)', checked: false },
                { text: '‰øùÊöñË°£Áâ© / ÂúçÂ∑æ', checked: false },
                { text: 'Á∂≤Âç° / eSim', checked: false }
            ];

            const defaultMustBuy = [
                { text: 'Olive Young Ë≠∑ËÜöÂìÅ', checked: false },
                { text: 'Èõ∂È£ü (ÁÉèÈæúÈ§Ö‰πæ)', checked: false },
                { text: 'Kakao Friends', checked: false },
                { text: 'HBAF Êùè‰ªÅÊûú', checked: false },
                { text: 'ÈüìÂúãË•™Â≠ê', checked: false }
            ];

            // Itinerary Data - Updated to v13.0 User Request
            const defaultItinerary = [
                // Day 1
                { id: 101, day: 1, time: '08:00', title: 'ÂæûÂÆ∂Ë£°Âá∫Áôº', location: 'Home', desc: 'Ê∫ñÊôÇÂá∫ÁôºÔºÅ', category: 'travel' },
                { id: 102, day: 1, time: '11:00', title: 'ÊäµÈÅîËÅØÁµ±ÂÅúËªäÂ†¥', location: 'Ê°ÉÂúíÂ∏ÇÂ§ßÂúíÂçÄÂúãÈöõË∑Ø‰∏ÄÊÆµ509-1Ëôü', desc: 'Ëæ¶ÁêÜÂÅúËªä„ÄÇ', category: 'travel' },
                { id: 103, day: 1, time: '12:00', title: 'ÊäµÈÅîÊ°ÉÂúí T2 Â†±Âà∞', location: 'TPE T2', desc: 'Ëæ¶ÁêÜÁôªÊ©üÊâãÁ∫å„ÄÇ', isFlight: true, category: 'flight' },
                { id: 104, day: 1, time: '14:25', title: 'Èï∑Ê¶ÆËà™Á©∫ BR164 Ëµ∑È£õ', location: 'TPE T2', desc: 'È†êË®à 17:40 ÊäµÈÅî PUS„ÄÇ', isFlight: true, category: 'flight', flightNo: 'BR164', depTime: '14:25', terminal: 'T2', gate: 'TBD', boardingTime: '13:55', type: 'departure' },
                { id: 105, day: 1, time: '18:10', title: 'ÂèñË°åÊùéÂâçÂæÄÂú∞Èêµ', location: 'ÈáëÊµ∑Ê©üÂ†¥ GATE3', desc: 'Áî±GATE3Ëµ∞Âà∞È¶¨Ë∑ØÂ∞çÈù¢Âè≥ËΩâ„ÄÇ', category: 'travel' },
                { id: 106, day: 1, time: '18:30', title: 'Âú∞ÈêµÂæÄÊ≤ô‰∏äÁ´ô', location: 'Ê©üÂ†¥Á´ô', desc: 'ËΩâ‰πòÁ∂†Ëâ≤2ËôüÁ∑öÂæÄË•øÈù¢/ËêáÂ±±ÊñπÂêë„ÄÇ', category: 'travel' },
                { id: 107, day: 1, time: '18:40', title: 'Ë•øÈù¢Á´ôËΩâ‰πò', location: 'Ë•øÈù¢Á´ô', desc: 'ËΩâ‰πòÊ©òËâ≤1ËôüÁ∑öÂæÄÂ§öÂçóÊµ¶/Â§ßÊµ¶Êµ∑Ê∞¥Êµ¥Â†¥ÊñπÂêëÔºåËá≥Êú≠ÂòéÂÖ∂Á´ô„ÄÇ', category: 'travel' },
                { id: 108, day: 1, time: '19:00', title: 'Êú≠ÂòéÂÖ∂Á´ôÂá∫Á´ô', location: 'Êú≠ÂòéÂÖ∂Á´ô 7ËôüÂá∫Âè£', desc: '5ËôüÂá∫Âè£ÊúâÈõªÊ¢ØÔºåÂá∫ÈõªÊ¢ØÁõ¥Ëµ∞ÈÅé7ËôüÂá∫Âè£Â∑¶ËΩâ„ÄÇ', category: 'travel' },
                { id: 109, day: 1, time: '19:05', title: 'NewCZÂçóÊµ¶Â∫ó Check In', location: 'NewCZ Nampo', desc: 'Ëæ¶ÁêÜÂÖ•‰Ωè„ÄÇ', category: 'travel' },
                { id: 110, day: 1, time: '20:00', title: 'Âë®ÈÇäË¶ìÈ£ü', location: 'È£ØÂ∫óÂë®ÈÇä', desc: 'ÊôöÈ§êÔºöË±¨ËÇâÊπØÈ£Ø„ÄÅ‰∫∫ËîòÈõûÊπØ„ÄÇ\nÂÆµÂ§úÔºöÁÇ∏Èõû (BHC/ËÄÅÁà∫ÁÇ∏Èõû)„ÄÇ', category: 'food' },

                // Day 2
                { id: 201, day: 2, time: '08:00', title: 'Êó©È§ê', location: 'È£ØÂ∫óÂë®ÈÇä', desc: '‰∫´Áî®Êó©È§ê„ÄÇ', category: 'food' },
                { id: 202, day: 2, time: '09:30', title: 'ÂâçÂæÄÊµ∑Èõ≤Âè∞', location: 'Êµ∑Èõ≤Âè∞', desc: 'Âú∞Èêµ(Á¥Ñ50ÂàÜ, 1800ÈüìÂÖÉ): 1ËôüÁ∑öÊú≠ÂòéÂÖ∂>Ë•øÈù¢ËΩâ2ËôüÁ∑ö>Êµ∑Èõ≤Âè∞„ÄÇ\nË®àÁ®ãËªä(Á¥Ñ40-60ÂàÜ, 20000ÈüìÂÖÉ)„ÄÇ', category: 'travel' },
                { id: 203, day: 2, time: '10:30', title: 'Êù±ÈáúÂ±±Ê®ÇÂ§©OUTLET', location: 'Lotte Outlet', desc: 'Êê≠Ë®àÁ®ãËªäÂâçÂæÄ„ÄÇÂèØÁé©ÊóÅÈÇäÊªëËªä(‰∏çÊÄïÂÜ∑ÁöÑË©±)„ÄÇ', category: 'shopping' },
                { id: 204, day: 2, time: '13:55', title: 'Êµ∑Èõ≤Âè∞ÂÇ≥Áµ±Â∏ÇÂ†¥ ÂçàÈ§ê', location: 'Êµ∑Èõ≤Âè∞Â∏ÇÂ†¥', desc: 'ÂêÉÂè§‰æÜÂè∏È≠öÁ≥ï„ÄÅ31ÂÖ¨ÂàÜÊµ∑ÈÆÆÊπØÈ∫µ„ÄÅÈÄõÂÇ≥Áµ±Â∏ÇÂ†¥„ÄÇ', category: 'food' },
                { id: 205, day: 2, time: '14:25', title: 'Êñ∞‰∏ñÁïåÁôæË≤®', location: 'Centum City', desc: 'Êê≠Ë®àÁ®ãËªäÂâçÂæÄ„ÄÇ', category: 'shopping' },
                { id: 206, day: 2, time: '15:30', title: 'SPA LAND Ê±óËí∏Âπï', location: 'Êñ∞‰∏ñÁïåÁôæË≤® B1', desc: 'È†êË®àÂÅúÁïô2-3Â∞èÊôÇ„ÄÇ', category: 'sightseeing' },
                { id: 207, day: 2, time: '18:00', title: 'ÂâçÂæÄË•øÈù¢Á´ô', location: 'Ë•øÈù¢', desc: 'Âú∞ÈêµÊàñË®àÁ®ãËªä„ÄÇ', category: 'travel' },
                { id: 208, day: 2, time: '18:30', title: 'ÊôöÈ§ê: Ë•øÈù¢ÁÉ§ËÇâ', location: 'Ë•øÈù¢Á´ô', desc: 'ÁÉ§ËÇâÁöÑÁî∑Â≠ê„ÄÅÂë≥Ë¥äÁéã„ÄÅÈáúÂ±±ÂÆÖÁÉ§ËÇâ„ÄÅ83Áç¨Ë±∏ (Ë•øÈù¢ÁÉ§ËÇâÂõõÂ§©Áéã)„ÄÇ', category: 'food' },
                { id: 209, day: 2, time: '19:30', title: 'Ëá™Áî±ÈÄõË°ó', location: 'Ë•øÈù¢', desc: 'ÂêÉÈ£ΩËá™Áî±ÈÄõË°ó„ÄÇ', category: 'shopping' },
                { id: 210, day: 2, time: '22:00', title: 'ÂõûÈ£ØÂ∫ó', location: 'NewCZ Nampo', desc: '‰ºëÊÅØ„ÄÇ', category: 'travel' },

                // Day 3
                { id: 301, day: 3, time: '09:00', title: 'KKday‰∏ÄÊó•ÈÅäÈõÜÂêà', location: 'ÈáúÂ±±Á´ô1ËôüÂá∫Âè£', desc: 'Êú≠ÂòéÂÖ∂Êê≠Âú∞ÈêµÂæÄ"ËÄÅÂåç"ÊñπÂêëÔºåÈáúÂ±±Á´ô‰∏ãËªä„ÄÇ\nÈõÜÂêàÈªûÔºöKTXÈáúÂ±±Á´ô1ËôüÂá∫Âè£„ÄÇ', category: 'sightseeing' },
                { id: 302, day: 3, time: '10:30', title: 'Â§©Á©∫ËÜ†Âõä', location: 'ËóçÁ∑öÂÖ¨Âúí', desc: 'KKdayË°åÁ®ã„ÄÇ', category: 'sightseeing' },
                { id: 303, day: 3, time: '13:10', title: 'Êµ∑Êù±ÈæçÂÆÆÂØ∫', location: 'Êµ∑Êù±ÈæçÂÆÆÂØ∫', desc: 'KKdayË°åÁ®ã„ÄÇ', category: 'sightseeing' },
                { id: 304, day: 3, time: '15:00', title: '‰ΩõÂúãÂØ∫', location: 'ÊÖ∂Â∑û', desc: 'KKdayË°åÁ®ã„ÄÇ', category: 'sightseeing' },
                { id: 305, day: 3, time: '16:40', title: 'Â§ßÈôµÈô¢+ÁöáÁêÜÂúòË∑Ø', location: 'ÊÖ∂Â∑û', desc: 'KKdayË°åÁ®ã„ÄÇ', category: 'sightseeing' },
                { id: 306, day: 3, time: '19:00', title: 'Êù±ÂÆÆËàáÊúàÊ±†', location: 'ÊÖ∂Â∑û', desc: 'KKdayË°åÁ®ã„ÄÇ', category: 'sightseeing' },
                { id: 307, day: 3, time: '21:30', title: 'ÊäµÈÅîË•øÈù¢Á´ô', location: 'Ë•øÈù¢', desc: 'ÂèØÊèêÂâç‰∏ãËªäÈÄõË°óÔºåÂÜçËá™Ë°åÂõûÈ£ØÂ∫ó„ÄÇ', category: 'travel' },
                { id: 308, day: 3, time: '21:50', title: 'ÊäµÈÅîÈáúÂ±±Á´ô', location: 'ÈáúÂ±±Á´ô', desc: 'Ë°åÁ®ãÁµêÊùüËøîÂõûÂ∏ÇÂçÄ„ÄÇ', category: 'travel' },

                // Day 4
                { id: 401, day: 4, time: '09:00', title: 'È£ØÂ∫óÂá∫Áôº', location: 'È£ØÂ∫ó', desc: 'Êê≠Ë®àÁ®ãËªä„ÄÇ', category: 'travel' },
                { id: 402, day: 4, time: '09:30', title: 'ÊùæÂ≥∂Â§©Á©∫Ê≠•ÈÅì', location: 'ÊùæÂ≥∂', desc: 'Ê≠•Ë°åÂèÉËßÄ„ÄÇ', category: 'sightseeing' },
                { id: 403, day: 4, time: '10:00', title: 'ÊùæÂ≥∂Êµ∑‰∏äÁ∫úËªä', location: 'ÊùæÂ≥∂', desc: 'Êê≠‰πòÁ∫úËªä„ÄÇ', category: 'sightseeing' },
                { id: 404, day: 4, time: '12:00', title: 'ÂçàÈ§ê: Êú≠ÂòéÂÖ∂Â∏ÇÂ†¥', location: 'Êú≠ÂòéÂÖ∂Â∏ÇÂ†¥', desc: 'Êê≠Ë®àÁ®ãËªäÂâçÂæÄ„ÄÇÂ∏ùÁéãËüπÂøÖÂêÉ (6-8Ëê¨ÈüìÂÖÉ/kg)„ÄÇ', category: 'food' },
                { id: 405, day: 4, time: '13:50', title: 'ÂΩ±Â≥∂Ê©ãÈñãÊ©ã', location: 'ÂΩ±Â≥∂Â§ßÊ©ã', desc: 'Ëã•Êó©Âà∞ÂèØÂéªÊ®ÇÂ§©ÁôæË≤®È†ÇÊ®ì„ÄÇËã•ÊôÇÈñì‰∏çË∂≥Âú®Ê©ãÈÇäÁúã„ÄÇ', category: 'sightseeing' },
                { id: 406, day: 4, time: '14:30', title: 'ÁôΩÊ∑∫ÁÅòÊñáÂåñÊùë', location: 'ÁôΩÊ∑∫ÁÅò', desc: 'Êê≠Ë®àÁ®ãËªä„ÄÇÊµ∑ÊôØ„ÄÅÂíñÂï°Âª≥„ÄÇÂÅúÁïô40-60ÂàÜ„ÄÇ', category: 'sightseeing' },
                { id: 407, day: 4, time: '15:30', title: 'Â§™ÂÆóÂè∞', location: 'Â§™ÂÆóÂè∞', desc: 'Êê≠Ë®àÁ®ãËªä„ÄÇÈÅäÂúíËªäÂè™ÈñãÂà∞17:30„ÄÇ', category: 'sightseeing' },
                { id: 408, day: 4, time: '18:30', title: 'ÂØåÂπ≥ÁΩêÈ†≠Â∏ÇÂ†¥ ÊôöÈ§ê', location: 'ÂØåÂπ≥Â∏ÇÂ†¥', desc: 'Êê≠Ë®àÁ®ãËªä„ÄÇÂêÉÊôöÈ§ê/Â∞èÂêÉ„ÄÇ', category: 'food' },
                { id: 409, day: 4, time: '21:00', title: 'ÈáúÂ±±Â°îÂ§úÊôØ', location: 'ÈáúÂ±±Â°î', desc: 'Ê¨£Ë≥ûÂ§úÊôØ„ÄÇ', category: 'sightseeing' },
                { id: 410, day: 4, time: '22:00', title: 'ÂõûÈ£ØÂ∫ó', location: 'NewCZ Nampo', desc: 'Êê≠Ë®àÁ®ãËªä„ÄÇ', category: 'travel' },

                // Day 5
                { id: 501, day: 5, time: '08:00', title: 'Êï¥ÁêÜË°åÊùé', location: 'È£ØÂ∫ó', desc: 'ÂØÑÊîæÊ´ÉÂè∞„ÄÇ', category: 'travel' },
                { id: 502, day: 5, time: '08:30', title: 'ÂâçÂæÄÁîòÂ∑ùÊ¥ûÊñáÂåñÊùë', location: 'ÁîòÂ∑ùÊ¥û', desc: 'Êê≠Ë®àÁ®ãËªä„ÄÇÂøÖÊãçÔºöÂ∞èÁéãÂ≠ê„ÄÅÂΩ©Ëâ≤ÈöéÊ¢Ø„ÄÅËßÄÊôØÂè∞„ÄÇÂÅúÁïô2Â∞èÊôÇ„ÄÇ', category: 'sightseeing' },
                { id: 503, day: 5, time: '12:00', title: 'ÂõûÂà∞È£ØÂ∫ó/ÂçàÈ§ê', location: 'ÂçóÊµ¶Ê¥û', desc: 'Ëá™Áî±Ê¥ªÂãï„ÄÅÂçàÈ§ê„ÄÅË£úÈΩä‰º¥ÊâãÁ¶Æ„ÄÇ', category: 'food' },
                { id: 504, day: 5, time: '14:30', title: 'ÂõûÈ£ØÂ∫óÈ†òË°åÊùé', location: 'È£ØÂ∫ó', desc: 'È†òÂèñË°åÊùé„ÄÇ', category: 'travel' },
                { id: 505, day: 5, time: '15:00', title: 'ÂâçÂæÄÈáëÊµ∑Ê©üÂ†¥', location: 'Ê©üÂ†¥', desc: 'Êê≠Âú∞Èêµ„ÄÇ', category: 'travel' },
                { id: 506, day: 5, time: '16:00', title: 'ÊäµÈÅîÈáëÊµ∑Ê©üÂ†¥', location: 'PUS', desc: 'Check-in„ÄÇ', isFlight: true, category: 'flight' },
                { id: 507, day: 5, time: '18:55', title: 'Èï∑Ê¶Æ BR163 Ëµ∑È£õ', location: 'PUS', desc: 'È£õÂæÄÊ°ÉÂúí„ÄÇ', isFlight: true, category: 'flight', flightNo: 'BR163', depTime: '18:55', terminal: 'Intl', gate: 'TBD', boardingTime: '18:25', type: 'return' },
                { id: 508, day: 5, time: '20:25', title: 'ÊäµÈÅîÊ°ÉÂúíÊ©üÂ†¥', location: 'TPE', desc: 'ÊóÖÁ®ãÁµêÊùü„ÄÇ', category: 'travel' },
                { id: 509, day: 5, time: '23:30', title: 'ÂõûÂà∞Ê∫´ÊöñÁöÑÂÆ∂', location: 'Home', desc: '‰ºëÊÅØ„ÄÇ', category: 'travel' },
            ];

            const itinerary = ref([]);
            
            onMounted(() => {
                newExpense.value.date = new Date().toISOString().split('T')[0];
                const savedItinerary = localStorage.getItem('busan_2026_v14_itinerary'); 
                const savedExpenses = localStorage.getItem('busan_2026_v14_expenses');
                
                // Use v14 data or default
                itinerary.value = savedItinerary ? JSON.parse(savedItinerary) : defaultItinerary;
                if (savedExpenses) expenses.value = JSON.parse(savedExpenses);
            });

            watch([itinerary, expenses, exchangeRate, luggageList, mustBuyList], () => {
                localStorage.setItem('busan_2026_v14_itinerary', JSON.stringify(itinerary.value));
                localStorage.setItem('busan_2026_v14_expenses', JSON.stringify(expenses.value));
            }, { deep: true });

            // Computed & Methods
            const filteredItinerary = computed(() => itinerary.value.filter(item => item.day === activeDay.value).sort((a, b) => a.time.localeCompare(b.time)));
            
            const convertKRWToTWD = (krw) => Math.round((Number(krw) || 0) / exchangeRate.value);
            const totalExpenseKRW = computed(() => expenses.value.reduce((s, i) => s + (Number(i.amount)||0), 0));
            const totalExpenseTWD = computed(() => convertKRWToTWD(totalExpenseKRW.value));
            const calculatedTWD = computed(() => convertKRWToTWD(calcKRW.value));

            // Pie Chart Logic
            const expenseBreakdownTWD = computed(() => {
                const breakdown = {};
                const rate = exchangeRate.value;
                expenses.value.forEach(exp => {
                    const twd = Math.round(exp.amount / rate);
                    if(!breakdown[exp.category]) breakdown[exp.category] = { amount: 0, color: filterCategories.find(c=>c.key===exp.category)?.colorCode };
                    breakdown[exp.category].amount += twd;
                });
                const total = Object.values(breakdown).reduce((s, i) => s + i.amount, 0);
                Object.values(breakdown).forEach(i => { 
                    i.percentage = total > 0 ? Math.round((i.amount / total) * 100) : 0; 
                    i.name = filterCategories.find(c => c.colorCode === i.color)?.name;
                });
                return breakdown;
            });

            const pieChartBackground = computed(() => {
                const entries = Object.values(expenseBreakdownTWD.value).filter(i => i.percentage > 0);
                if (entries.length === 0) return '#F0F2FF';
                let current = 0;
                return entries.map(i => {
                    const end = current + (i.percentage / 100) * 360;
                    const val = `${i.color} ${current}deg ${end}deg`;
                    current = end;
                    return val;
                }).join(', ');
            });

            const addExpense = () => {
                if(!newExpense.value.item || newExpense.value.amount <= 0 || !newExpense.value.category) return;
                expenses.value.unshift({...newExpense.value});
                newExpense.value.item = ''; newExpense.value.amount = null;
            };
            const removeExpense = (i) => confirm('Âà™Èô§?') && expenses.value.splice(i, 1);

            const getDayInfo = (d) => tripDates[d];
            const getCategoryName = (k) => filterCategories.find(c => c.key === k)?.name;
            const formatNumber = (n) => n?.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            const getNaverMapLink = (q) => `https://map.naver.com/p/search/${encodeURIComponent(q)}`;
            const getGoogleMapLink = (q) => `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q)}`;

            // List methods
            const addLuggage = () => { if(newLuggageItem.value) luggageList.value.push({text: newLuggageItem.value}); newLuggageItem.value = ''; };
            const removeLuggage = (i) => luggageList.value.splice(i,1);
            const addMustBuy = () => { if(newMustBuyItem.value) mustBuyList.value.push({text: newMustBuyItem.value}); newMustBuyItem.value = ''; };
            const removeMustBuy = (i) => mustBuyList.value.splice(i,1);
            const searchNaverMap = () => window.open(`https://map.naver.com/p/search/${encodeURIComponent(mapQuery.value)}`, '_blank');
            const searchGoogleMap = () => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(mapQuery.value)}`, '_blank');

            return {
                currentTab, activeDay, currentTabName, currentTabIcon, 
                itinerary, expenses, exchangeRate, filteredItinerary,
                totalExpenseTWD, totalExpenseKRW, newExpense, calcKRW, calculatedTWD,
                luggageList, newLuggageItem, mustBuyList, newMustBuyItem,
                tabs, desktopTabs, filterCategories,
                pieChartBackground, expenseBreakdownTWD,
                addExpense, removeExpense, convertKRWToTWD,
                addLuggage, removeLuggage, addMustBuy, removeMustBuy,
                formatNumber, searchNaverMap, searchGoogleMap, getNaverMapLink, getGoogleMapLink, getDayInfo, getCategoryName, currentTabName, currentTabIcon, mapQuery
            };
        }
    }).mount('#app');
</script>
</body>
</html>
